{% extends "layouts/main.html" %}

{% block pageTitle %}
  Check your answers template – {{ serviceName }} – GOV.UK Prototype Kit
{% endblock %}

{% block beforeContent %}
  {{ govukBackLink({
    text: "Back",
    href: "javascript:window.history.back()"
  }) }}
{% endblock %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds-from-desktop">

      <h1 class="govuk-heading-xl">
        Check your answers before sending your application
      </h1>

      {{ govukSummaryList({
        rows: [
          {
            key: {
              text: "Travelled outside the UK in the last 12 months"
            },
            value: {
              text: data['travelled'] or "Not provided"
            },
            actions: {
              items: [
                {
                  href: "/travel/travelled",
                  text: "Change",
                  visuallyHiddenText: "Question 1"
                }
              ]
            }
          }
          
        ]
      }) }}
</div>

<div class="govuk-grid-column" style="padding: 0 15px">

        {% from "govuk/components/table/macro.njk" import govukTable %}

         {% if data['trips'] and data['trips'].length > 0 %}

          {% set rows = [] %}
          {% for trip in data['trips'] %}
            {% set rows = rows.concat([[
              { text: loop.index },
              { text: trip.country or "-" },
              { text: trip.from or "-" },
              { text: trip.to or "-" },
              { text: trip.reason or "-" },
              { html: '<a href="/travel/edit-trip-entry?index=' + loop.index0 + '">Change</a> <br/> <a href="/travel/remove-trip?index=' + loop.index0 + '&amp;redirect=/travel/another-trip">Remove</a>' }
            ]]) %}
          {% endfor %}

          {{ govukTable({
            caption: "Your trips",
            captionClasses: "govuk-table__caption--m",
            head: [
              { text: "Trip" },
              { text: "Country" },
              { text: "From" },
              { text: "To" },
              { text: "Reason" },
              { text: "Actions" }
            ],
            rows: rows
          }) }}

        {% else %}

        <p class="govuk-body">You haven’t added any trips yet.</p>

      {% endif %}

      </div>
        <div class="govuk-grid-column-two-thirds-from-desktop">


      <h2 class="govuk-heading-m">
        Now send your application
      </h2>

      <p>
        By submitting this application you are confirming that, to the best of your knowledge, the details you are providing are correct.
      </p>

      <form action="/travel/confirmation" method="post" novalidate>

        {{ govukButton({
          text: "Accept and send"
        }) }}

      </form>

    </div>
  </div>
{% endblock %}
