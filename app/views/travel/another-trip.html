{% extends "layouts/main.html" %}

{% block pageTitle %}
  Question page template – {{ serviceName }} – GOV.UK Prototype Kit
{% endblock %}

{% block beforeContent %}
  {{ govukBackLink({
  text: "Back",
  href: "javascript:window.history.back()"
}) }}
{% endblock %}

{% block content %}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

      <form class="form" action="/travel/another-trip" method="post">

 {{ govukRadios({
          name: "anotherTrip",
          fieldset: {
            legend: {
              text: "Add another trip?",
              isPageHeading: true,
              classes: "govuk-fieldset__legend--l"
            }
          },
          value: data["anotherTrip"] or "",
          items: [
            {
              value: "Yes",
              text: "Yes"
            },
            {
              value: "No",
              text: "No"
            }
          ]
        }) }}

        {{ govukButton({
          text: "Continue"
        }) }}
      </form>
    </div>

    <div class="govuk-grid-column">

        {% from "govuk/components/table/macro.njk" import govukTable %}

        {% if data['trips'] and data['trips'].length > 0 %}

          {% set rows = [] %}
          {% for trip in data['trips'] %}
            {% set rows = rows.concat([[
              { text: loop.index },
              { text: trip.country or "-" },
              { text: trip.from or "-" },
              { text: trip.to or "-" },
              { text: trip.reason or "-" },
              { html: '<a href="/travel/edit-trip-entry?index=' + loop.index0 + '">Change</a> <br/> <a href="/travel/remove-trip?index=' + loop.index0 + '&amp;redirect=/travel/another-trip">Remove</a>' }
            ]]) %}
          {% endfor %}

          {{ govukTable({
            caption: "Your trips",
            captionClasses: "govuk-table__caption--m",
            head: [
              { text: "Trip" },
              { text: "Country" },
              { text: "From" },
              { text: "To" },
              { text: "Reason" },
              { text: "Actions" }
            ],
            rows: rows
          }) }}

        {% else %}

        <p class="govuk-body">You haven’t added any trips yet.</p>

      {% endif %}

    </div>
  </div>

{% endblock %}
